<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>Daily Market Summary - Free AI-Powered Stock Market Analysis & Technical Levels</title>
    <meta name="title" content="Daily Market Summary - Free AI-Powered Stock Market Analysis & Technical Levels">
    <meta name="description" content="Free daily stock market analysis with AI-powered insights, sector performance heatmap, market breadth indicators, and key technical levels for SPY, QQQ, NVDA, and 135+ stocks. Educational content for traders and investors.">
    <meta name="keywords" content="stock market analysis, daily market summary, technical analysis, SPY levels, QQQ analysis, sector rotation, market breadth, stock trading, AI market analysis, free stock analysis, trading education">
    <meta name="author" content="Daily Market Summary">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://marketdly.com/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://marketdly.com/">
    <meta property="og:title" content="Daily Market Summary - Free AI-Powered Stock Market Analysis">
    <meta property="og:description" content="Free daily stock market analysis with AI insights, sector performance, market breadth, and technical levels for 135+ stocks. Educational content for traders.">
    <meta property="og:image" content="https://marketdly.com/og-image.png">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://marketdly.com/">
    <meta property="twitter:title" content="Daily Market Summary - Free AI-Powered Stock Market Analysis">
    <meta property="twitter:description" content="Free daily stock market analysis with AI insights, sector performance, market breadth, and technical levels for 135+ stocks.">
    <meta property="twitter:image" content="https://marketdly.com/og-image.png">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Daily Market Summary",
      "url": "https://marketdly.com",
      "description": "Free daily stock market analysis with AI-powered insights",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://marketdly.com/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FinancialService",
      "name": "Daily Market Summary",
      "description": "Free AI-powered daily stock market analysis and technical levels",
      "url": "https://marketdly.com",
      "areaServed": "Worldwide",
      "serviceType": "Financial Market Analysis"
    }
    </script>
    
    <!-- Resource Hints for Performance -->
    <link rel="preconnect" href="https://xfi2u4ajm9.execute-api.us-east-1.amazonaws.com">
    <link rel="dns-prefetch" href="https://xfi2u4ajm9.execute-api.us-east-1.amazonaws.com">
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', system-ui, -apple-system, sans-serif; }
        .btn-primary { @apply px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl; }
        .btn-secondary { @apply px-6 py-3 bg-white/10 hover:bg-white/20 text-white font-medium rounded-lg transition-all duration-200; }
        .card { @apply bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6 hover:border-slate-600/50 transition-all duration-200; }
    </style>
</head>
<body class="bg-slate-900 text-white antialiased">
    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-slate-900/80 backdrop-blur-md border-b border-slate-800">
        <div class="container mx-auto px-6 py-4 max-w-7xl">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center font-bold text-lg">
                        DMS
                    </div>
                    <span class="text-xl font-bold">Daily Market Summary</span>
                </div>
                <div id="navAuth" class="flex items-center gap-3">
                    <button id="navLoginBtn" class="px-5 py-2 text-gray-300 hover:text-white font-medium transition">Login</button>
                    <button id="navSignupBtn" class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition hover:scale-105">Sign Up Free</button>
                </div>
                <div id="navUserInfo" class="hidden">
                    <div class="flex items-center gap-3">
                        <a href="/portfolio.html" class="text-gray-400 hover:text-white transition">Portfolio</a>
                        <a href="/swing-scanner.html" class="text-gray-400 hover:text-white transition">Swing Scanner</a>
                        <span class="text-gray-400">üëã <span id="navUserEmail" class="text-white font-medium"></span></span>
                        <button id="navLogoutBtn" class="px-4 py-2 text-gray-400 hover:text-white transition">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-6 py-12 max-w-7xl">
        <!-- Hero Section -->
        <header id="heroSection" class="text-center mb-16 max-w-5xl mx-auto">
            <!-- Main Headline -->
            <div class="mb-8">
                <h1 class="text-6xl md:text-7xl font-bold mb-4 leading-tight bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
                    Daily Market Analysis
                </h1>
                <p class="text-2xl md:text-3xl font-semibold text-white mb-3">
                    AI-Powered Technical Analysis for 135+ Stocks
                </p>
                <p class="text-lg text-gray-400 max-w-2xl mx-auto">
                    Get actionable insights on price levels, sector rotation, and swing trade opportunities. Updated every market day.
                </p>
            </div>

            <!-- Stats Bar -->
            <div class="flex flex-wrap items-center justify-center gap-8 mb-10 text-sm">
                <div class="text-center">
                    <div class="text-3xl font-bold text-blue-400">135+</div>
                    <div class="text-gray-400">Stocks Tracked</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-purple-400">Daily</div>
                    <div class="text-gray-400">AI Analysis</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-green-400">Free</div>
                    <div class="text-gray-400">No Credit Card</div>
                </div>
            </div>
            
            <!-- CTA Buttons -->
            <div id="heroAuth" class="flex flex-col sm:flex-row items-center justify-center gap-4 mb-10">
                <button id="heroSignupBtn" class="px-10 py-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white text-lg font-bold rounded-xl transition-all duration-200 hover:scale-105 shadow-lg shadow-blue-500/50 w-full sm:w-auto">
                    Get Free Access ‚Üí
                </button>
                <button id="heroLoginBtn" class="px-10 py-4 bg-slate-800 hover:bg-slate-700 text-white text-lg font-medium rounded-xl transition-all duration-200 border border-slate-700 w-full sm:w-auto">
                    Login
                </button>
            </div>

            <!-- Feature Grid -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-slate-800/50 border border-slate-700/50 rounded-xl p-6 hover:border-blue-500/50 transition">
                    <div class="text-4xl mb-3">üìä</div>
                    <div class="font-bold text-lg mb-2">Market Overview</div>
                    <div class="text-gray-400">Sector rotation, unusual moves, key levels to watch</div>
                </div>
                <div class="bg-slate-800/50 border border-slate-700/50 rounded-xl p-6 hover:border-blue-500/50 transition">
                    <div class="text-4xl mb-3">üéØ</div>
                    <div class="font-bold text-lg mb-2">Swing Scanner</div>
                    <div class="text-gray-400">Breakout patterns with entry, stop, and target levels</div>
                </div>
                <div class="bg-slate-800/50 border border-slate-700/50 rounded-xl p-6 hover:border-blue-500/50 transition">
                    <div class="text-4xl mb-3">üèÜ</div>
                    <div class="font-bold text-lg mb-2">Portfolio Challenge</div>
                    <div class="text-gray-400">Compete with traders, track performance</div>
                </div>
            </div>
            
            <!-- Logged In Welcome -->
            <div id="heroUserWelcome" class="hidden">
                <div class="bg-gradient-to-r from-blue-600/10 to-purple-600/10 border border-blue-500/30 rounded-xl p-8 max-w-2xl mx-auto">
                    <p class="text-2xl font-semibold mb-6">üëã Welcome back, <span id="heroUserEmail" class="text-blue-400"></span></p>
                    <div class="flex flex-wrap items-center justify-center gap-4">
                        <a href="#ticker-analysis" class="px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition">
                            üìä View Market Analysis
                        </a>
                        <a href="/swing-scanner.html" class="px-8 py-3 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition">
                            üéØ Swing Scanner
                        </a>
                        <a href="/portfolio.html" class="px-8 py-3 bg-slate-700 hover:bg-slate-600 text-white font-semibold rounded-lg transition">
                            üèÜ Portfolio
                        </a>
                    </div>
                </div>
            </div>

            <!-- Trust Indicators -->
            <div id="trustIndicators" class="flex flex-wrap items-center justify-center gap-6 text-gray-500">
                <div class="flex items-center gap-2">
                    <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span>Free Forever</span>
                </div>
                <div class="flex items-center gap-2">
                    <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span>2-minute setup</span>
                </div>
                <div class="flex items-center gap-2">
                    <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span>100% Free</span>
                </div>
            </div>
        </header>

        <!-- Signup Modal -->
        <div id="signupModal" class="hidden fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4">
            <div class="bg-gradient-to-br from-[#1a1f2e] to-[#0a0f19] border border-blue-500/30 rounded-2xl max-w-md w-full p-8 relative">
                <button id="closeSignup" class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl">&times;</button>
                
                <div class="text-center mb-6">
                    <h2 class="text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-600 bg-clip-text text-transparent mb-2">Join 1,000+ Traders</h2>
                    <p class="text-gray-400">Get instant access to premium features</p>
                </div>

                <!-- Benefits -->
                <div class="space-y-3 mb-6">
                    <div class="flex items-start gap-3">
                        <div class="text-green-400 text-xl">‚úì</div>
                        <div>
                            <div class="font-semibold text-white">Unlimited Ticker Analysis</div>
                            <div class="text-sm text-gray-400">Analyze any stock with AI-powered insights</div>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <div class="text-green-400 text-xl">‚úì</div>
                        <div>
                            <div class="font-semibold text-white">Save Your Watchlist</div>
                            <div class="text-sm text-gray-400">Track your favorite stocks in one place</div>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <div class="text-green-400 text-xl">‚úì</div>
                        <div>
                            <div class="font-semibold text-white">Full Historical Access</div>
                            <div class="text-sm text-gray-400">Browse 30+ days of market analysis</div>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <div class="text-green-400 text-xl">‚úì</div>
                        <div>
                            <div class="font-semibold text-white">100% Free Forever</div>
                            <div class="text-sm text-gray-400">No credit card required</div>
                        </div>
                    </div>
                </div>

                <!-- Signup Form -->
                <form id="signupForm" class="space-y-4">
                    <input type="text" id="honeypot" class="hidden" tabindex="-1" autocomplete="off">
                    <div>
                        <input
                            type="email"
                            id="signupEmail"
                            placeholder="Email address"
                            required
                            class="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
                        />
                    </div>
                    <div>
                        <input
                            type="password"
                            id="signupPassword"
                            placeholder="Password (min 8 characters)"
                            required
                            minlength="8"
                            class="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
                        />
                    </div>
                    <button
                        type="submit"
                        id="signupSubmitBtn"
                        class="w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold rounded-lg hover:opacity-90 transition disabled:opacity-50"
                    >
                        Create Free Account
                    </button>
                    <p id="signupMessage" class="text-sm text-center"></p>
                </form>

                <p class="text-xs text-gray-500 text-center mt-4">
                    By signing up, you agree to our Terms of Service and Privacy Policy
                </p>
            </div>
        </div>

        <!-- Login Modal -->
        <div id="loginModal" class="hidden fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4">
            <div class="bg-gradient-to-br from-[#1a1f2e] to-[#0a0f19] border border-blue-500/30 rounded-2xl max-w-md w-full p-8 relative">
                <button id="closeLogin" class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl">&times;</button>
                
                <div class="text-center mb-6">
                    <h2 class="text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-600 bg-clip-text text-transparent mb-2">Welcome Back</h2>
                    <p class="text-gray-400">Login to access your account</p>
                </div>

                <!-- Login Form -->
                <form id="loginForm" class="space-y-4">
                    <div>
                        <input
                            type="email"
                            id="loginEmail"
                            placeholder="Email address"
                            required
                            class="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
                        />
                    </div>
                    <div>
                        <input
                            type="password"
                            id="loginPassword"
                            placeholder="Password"
                            required
                            class="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
                        />
                    </div>
                    <button
                        type="submit"
                        id="loginSubmitBtn"
                        class="w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold rounded-lg hover:opacity-90 transition disabled:opacity-50"
                    >
                        Login
                    </button>
                    <p id="loginMessage" class="text-sm text-center"></p>
                </form>

                <p class="text-sm text-gray-400 text-center mt-4">
                    Don't have an account? <button id="switchToSignup" class="text-blue-400 hover:text-blue-300">Sign up free</button>
                </p>
            </div>
        </div>

        <!-- Verification Modal -->
        <div id="verifyModal" class="hidden fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4">
            <div class="bg-gradient-to-br from-[#1a1f2e] to-[#0a0f19] border border-blue-500/30 rounded-2xl max-w-md w-full p-8 relative">
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4">üìß</div>
                    <h2 class="text-2xl font-bold text-white mb-2">Verify Your Email</h2>
                    <p class="text-gray-400">We sent a verification code to <span id="verifyEmailDisplay" class="text-blue-400"></span></p>
                </div>

                <form id="verifyForm" class="space-y-4">
                    <div>
                        <input
                            type="text"
                            id="verifyCode"
                            placeholder="Enter 6-digit code"
                            required
                            maxlength="6"
                            class="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 text-center text-2xl tracking-widest"
                        />
                    </div>
                    <button
                        type="submit"
                        id="verifySubmitBtn"
                        class="w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold rounded-lg hover:opacity-90 transition disabled:opacity-50"
                    >
                        Verify Email
                    </button>
                    <p id="verifyMessage" class="text-sm text-center"></p>
                </form>

                <button id="resendCode" class="text-sm text-blue-400 hover:text-blue-300 mt-4 w-full text-center">Resend code</button>
            </div>
        </div>

        <!-- Ticker Analysis Tool -->
        <div id="tickerAnalysisSection" class="card mb-12 hidden">
            <!-- Logged In View -->
            <div id="tickerAnalysisForm" class="hidden">
                <h2 class="text-2xl font-bold mb-6">üîç Analyze Any Ticker</h2>
                <p class="text-gray-400 mb-6">Get comprehensive AI-powered analysis for any stock</p>
                <form id="tickerForm" class="flex flex-col sm:flex-row gap-4 max-w-2xl">
                <input
                    type="text"
                    id="ticker"
                    placeholder="Enter ticker (e.g., AAPL)"
                    required
                    class="flex-1 px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 uppercase"
                />
                <button
                    type="submit"
                    id="analyzeBtn"
                    class="px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-600 text-white font-semibold rounded-lg hover:opacity-90 transition disabled:opacity-50"
                >
                    Analyze
                </button>
            </form>
            <p id="tickerMessage" class="mt-3 text-sm text-center"></p>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loading" class="text-center py-20">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"></div>
            <p class="text-gray-400 mt-4">Loading today's analysis...</p>
        </div>

        <!-- Content -->
        <main id="content" class="hidden space-y-8">
            <!-- Ticker Analysis (Logged In Users Only) -->
            <div id="topTickerAnalysis" class="card hidden">
                <h2 class="text-2xl font-bold mb-2">üîç Analyze Any Ticker</h2>
                <p class="text-gray-400 mb-6">Get comprehensive AI-powered analysis for any stock</p>
                <div class="flex flex-col sm:flex-row gap-3">
                    <form id="topTickerForm" class="flex flex-col sm:flex-row gap-3 flex-1">
                        <input
                            type="text"
                            id="topTicker"
                            placeholder="Enter ticker (e.g., AAPL)"
                            required
                            class="flex-1 px-4 py-3 rounded-lg bg-slate-700 border border-slate-600 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 uppercase"
                        />
                        <button
                            type="submit"
                            id="topAnalyzeBtn"
                            class="px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition disabled:opacity-50 whitespace-nowrap"
                        >
                            Analyze
                        </button>
                    </form>
                    <a href="/portfolio.html" class="px-5 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition whitespace-nowrap text-center">üíº My Portfolios</a>
                    <a href="/challenge.html" class="px-5 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg font-medium transition whitespace-nowrap text-center">üèÜ Challenge</a>
                </div>
                <p id="topTickerMessage" class="mt-3 text-sm text-center"></p>
            </div>

            <!-- Date Info & Navigation -->
            <div class="text-center py-8 border-y border-slate-800">
                <p class="text-gray-400 text-lg font-medium mb-4" id="dateDisplay">Loading...</p>
                <div class="flex items-center justify-center gap-4">
                    <button id="prevDay" class="btn-secondary">‚Üê Previous Day</button>
                    <button id="nextDay" class="btn-secondary">Next Day ‚Üí</button>
                </div>
            </div>

            <!-- Sector Heatmap -->
            <article class="card">
                <h2 class="text-2xl font-bold mb-6">üî• Sector Performance</h2>
                <div id="sectorHeatmap" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"></div>
            </article>

            <!-- Market Breadth -->
            <article class="card">
                <h2 class="text-2xl font-bold mb-6">üìà Market Breadth</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="marketBreadth"></div>
            </article>

            <!-- Market Overview -->
            <article class="card">
                <h2 class="text-2xl font-bold mb-6">üìä Market Overview</h2>
                <p class="text-gray-300 leading-relaxed text-lg" id="marketOverview"></p>
            </article>

            <!-- Market Insights -->
            <article class="card">
                <h2 class="text-2xl font-bold mb-6">üí° Market Insights</h2>
                <ul class="space-y-4 text-gray-300" id="marketInsights"></ul>
            </article>

            <!-- Levels to Watch -->
            <article class="card">
                <h2 class="text-2xl font-bold mb-6">üéØ Levels to Watch</h2>
                <div class="space-y-4" id="levelsToWatch"></div>
            </article>

            <!-- Unusual Activity -->
            <article class="card" id="unusualSection">
                <h2 class="text-2xl font-bold mb-6">‚ö° Unusual Activity</h2>
                <div class="space-y-4" id="unusualActivity"></div>
            </article>

            <!-- Disclaimer -->
            <div class="bg-yellow-900/20 border border-yellow-700/50 rounded-lg p-6">
                <p class="text-sm text-yellow-200 text-center">
                    <strong>EDUCATIONAL CONTENT ONLY:</strong> This content is for educational purposes only and does not constitute 
                    financial advice, investment recommendations, or an offer to buy or sell securities. Always conduct your own 
                    research and consult with a licensed financial advisor before making investment decisions.
                </p>
            </div>
        </main>

        <!-- Error State -->
        <div id="error" class="hidden text-center py-20">
            <p class="text-red-400 text-xl">Failed to load today's analysis</p>
            <p class="text-gray-400 mt-2">Please try again later</p>
        </div>

        <!-- SEO Footer -->
        <footer class="mt-16 border-t border-white/10 pt-8 pb-4">
            <div class="max-w-4xl mx-auto">
                <div class="grid md:grid-cols-3 gap-8 mb-8">
                    <div>
                        <h3 class="text-lg font-semibold mb-3 text-blue-400">About</h3>
                        <p class="text-gray-400 text-sm leading-relaxed">
                            Daily Market Summary provides free AI-powered stock market analysis covering 135+ stocks including SPY, QQQ, NVDA, AAPL, and more. Get daily insights on sector rotation, market breadth, and key technical levels.
                        </p>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-3 text-blue-400">Coverage</h3>
                        <ul class="text-gray-400 text-sm space-y-2">
                            <li>‚Ä¢ Major Indices: SPY, QQQ, DIA, IWM</li>
                            <li>‚Ä¢ Tech & AI: NVDA, AMD, AAPL, MSFT</li>
                            <li>‚Ä¢ Sectors: Finance, Healthcare, Energy</li>
                            <li>‚Ä¢ Crypto: BTC, ETH, COIN, MSTR</li>
                            <li>‚Ä¢ Market Breadth & Technical Analysis</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-3 text-blue-400">Features</h3>
                        <ul class="text-gray-400 text-sm space-y-2">
                            <li>‚Ä¢ Daily AI Market Analysis</li>
                            <li>‚Ä¢ Sector Performance Heatmap</li>
                            <li>‚Ä¢ Market Breadth Indicators</li>
                            <li>‚Ä¢ Key Technical Levels</li>
                            <li>‚Ä¢ Historical Archive</li>
                            <li>‚Ä¢ Individual Ticker Analysis</li>
                        </ul>
                    </div>
                </div>
                <div class="text-center text-gray-500 text-sm">
                    <p>&copy; 2025 Daily Market Summary. Free educational stock market analysis and technical levels.</p>
                    <p class="mt-2">Stock Market Analysis | Technical Analysis | Trading Education | Market Insights</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Amazon Cognito Identity SDK -->
    <script src="https://cdn.jsdelivr.net/npm/amazon-cognito-identity-js@6.3.7/dist/amazon-cognito-identity.min.js"></script>
    
    <script>
        // Cognito Configuration
        const poolData = {
            UserPoolId: 'us-east-1_N5yuAGHc3',
            ClientId: '3ras51lrq716j8mij5887uug17'
        };
        const userPool = new AmazonCognitoIdentity.CognitoUserPool(poolData);
        let currentUser = null;
        let pendingEmail = null;

        // Check auth status on load
        function checkAuthStatus() {
            currentUser = userPool.getCurrentUser();
            if (currentUser) {
                currentUser.getSession((err, session) => {
                    if (err || !session.isValid()) {
                        showAuthButtons();
                        return;
                    }
                    currentUser.getUserAttributes((err, attributes) => {
                        if (!err) {
                            const email = attributes.find(attr => attr.Name === 'email')?.Value;
                            localStorage.setItem('userEmail', email);
                            showUserInfo(email);
                        }
                    });
                });
            } else {
                showAuthButtons();
            }
        }

        function showAuthButtons() {
            // Hero section
            document.getElementById('heroSection')?.classList.remove('hidden');
            // Navigation
            document.getElementById('navAuth')?.classList.remove('hidden');
            document.getElementById('navUserInfo')?.classList.add('hidden');
            // Ticker section - hide completely when logged out
            document.getElementById('tickerAnalysisSection')?.classList.add('hidden');
            // Top ticker form
            document.getElementById('topTickerAnalysis')?.classList.add('hidden');
        }

        function showUserInfo(email) {
            // Hide entire hero section after login
            document.getElementById('heroSection')?.classList.add('hidden');
            // Navigation
            document.getElementById('navAuth')?.classList.add('hidden');
            document.getElementById('navUserInfo')?.classList.remove('hidden');
            document.getElementById('navUserEmail').textContent = email;
            // Hide bottom ticker section, show top form
            document.getElementById('tickerAnalysisSection')?.classList.add('hidden');
            document.getElementById('topTickerAnalysis')?.classList.remove('hidden');
        }

        // Modal controls - Hero buttons
        document.getElementById('heroSignupBtn').addEventListener('click', () => {
            document.getElementById('signupModal').classList.remove('hidden');
        });
        document.getElementById('heroLoginBtn').addEventListener('click', () => {
            document.getElementById('loginModal').classList.remove('hidden');
        });

        // Modal controls - Nav buttons
        document.getElementById('navSignupBtn').addEventListener('click', () => {
            document.getElementById('signupModal').classList.remove('hidden');
        });
        document.getElementById('navLoginBtn').addEventListener('click', () => {
            document.getElementById('loginModal').classList.remove('hidden');
        });

        document.getElementById('closeSignup').addEventListener('click', () => {
            document.getElementById('signupModal').classList.add('hidden');
        });

        document.getElementById('closeLogin').addEventListener('click', () => {
            document.getElementById('loginModal').classList.add('hidden');
        });

        document.getElementById('switchToSignup').addEventListener('click', () => {
            document.getElementById('loginModal').classList.add('hidden');
            document.getElementById('signupModal').classList.remove('hidden');
        });

        // Signup
        document.getElementById('signupForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // Bot protection: honeypot
            if (document.getElementById('honeypot').value) {
                return; // Bot detected
            }
            
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const btn = document.getElementById('signupSubmitBtn');
            const msg = document.getElementById('signupMessage');
            
            btn.disabled = true;
            btn.textContent = 'Creating account...';
            msg.textContent = '';
            
            const attributeList = [
                new AmazonCognitoIdentity.CognitoUserAttribute({ Name: 'email', Value: email })
            ];
            
            userPool.signUp(email, password, attributeList, null, (err, result) => {
                btn.disabled = false;
                btn.textContent = 'Create Free Account';
                
                if (err) {
                    msg.className = 'text-sm text-center text-red-400';
                    msg.textContent = err.message || 'Signup failed';
                    return;
                }
                
                pendingEmail = email;
                document.getElementById('signupModal').classList.add('hidden');
                document.getElementById('verifyModal').classList.remove('hidden');
                document.getElementById('verifyEmailDisplay').textContent = email;
            });
        });

        // Verify email
        document.getElementById('verifyForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const code = document.getElementById('verifyCode').value;
            const btn = document.getElementById('verifySubmitBtn');
            const msg = document.getElementById('verifyMessage');
            
            btn.disabled = true;
            btn.textContent = 'Verifying...';
            msg.textContent = '';
            
            const userData = {
                Username: pendingEmail,
                Pool: userPool
            };
            const cognitoUser = new AmazonCognitoIdentity.CognitoUser(userData);
            
            cognitoUser.confirmRegistration(code, true, (err, result) => {
                btn.disabled = false;
                btn.textContent = 'Verify Email';
                
                if (err) {
                    msg.className = 'text-sm text-center text-red-400';
                    msg.textContent = err.message || 'Verification failed';
                    return;
                }
                
                msg.className = 'text-sm text-center text-green-400';
                msg.textContent = '‚úì Email verified! Logging you in...';
                
                setTimeout(() => {
                    document.getElementById('verifyModal').classList.add('hidden');
                    document.getElementById('loginModal').classList.remove('hidden');
                    document.getElementById('loginEmail').value = pendingEmail;
                }, 1500);
            });
        });

        // Resend code
        document.getElementById('resendCode').addEventListener('click', () => {
            const userData = {
                Username: pendingEmail,
                Pool: userPool
            };
            const cognitoUser = new AmazonCognitoIdentity.CognitoUser(userData);
            
            cognitoUser.resendConfirmationCode((err, result) => {
                const msg = document.getElementById('verifyMessage');
                if (err) {
                    msg.className = 'text-sm text-center text-red-400';
                    msg.textContent = err.message;
                } else {
                    msg.className = 'text-sm text-center text-green-400';
                    msg.textContent = '‚úì Code resent!';
                }
            });
        });

        // Login
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const btn = document.getElementById('loginSubmitBtn');
            const msg = document.getElementById('loginMessage');
            
            btn.disabled = true;
            btn.textContent = 'Logging in...';
            msg.textContent = '';
            
            const authenticationData = {
                Username: email,
                Password: password
            };
            const authenticationDetails = new AmazonCognitoIdentity.AuthenticationDetails(authenticationData);
            
            const userData = {
                Username: email,
                Pool: userPool
            };
            const cognitoUser = new AmazonCognitoIdentity.CognitoUser(userData);
            
            cognitoUser.authenticateUser(authenticationDetails, {
                onSuccess: (result) => {
                    msg.className = 'text-sm text-center text-green-400';
                    msg.textContent = '‚úì Login successful!';
                    
                    localStorage.setItem('userEmail', email);
                    
                    setTimeout(() => {
                        document.getElementById('loginModal').classList.add('hidden');
                        showUserInfo(email);
                        currentUser = cognitoUser;
                    }, 1000);
                },
                onFailure: (err) => {
                    btn.disabled = false;
                    btn.textContent = 'Login';
                    msg.className = 'text-sm text-center text-red-400';
                    msg.textContent = err.message || 'Login failed';
                }
            });
        });

        // Logout
        document.getElementById('navLogoutBtn').addEventListener('click', () => {
            if (currentUser) {
                currentUser.signOut();
                currentUser = null;
                showAuthButtons();
            }
        });

        // Initialize
        checkAuthStatus();

        // Top ticker analysis form (for logged-in users)
        document.getElementById('topTickerForm')?.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const ticker = document.getElementById('topTicker').value.toUpperCase();
            const btn = document.getElementById('topAnalyzeBtn');
            const msg = document.getElementById('topTickerMessage');
            
            btn.disabled = true;
            btn.textContent = 'Analyzing...';
            msg.textContent = '';
            
            try {
                const response = await fetch('https://xfi2u4ajm9.execute-api.us-east-1.amazonaws.com/prod/ticker-analysis', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ ticker })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    sessionStorage.setItem('tickerAnalysis', JSON.stringify(data));
                    window.location.href = '/ticker-analysis.html';
                } else {
                    throw new Error('Failed to analyze ticker');
                }
            } catch (error) {
                msg.className = 'mt-3 text-sm text-center text-red-400';
                msg.textContent = 'Unable to analyze ticker. Please check the symbol and try again.';
            } finally {
                btn.disabled = false;
                btn.textContent = 'Analyze';
            }
        });

        // Ticker analysis form (bottom section for non-logged-in users)
        document.getElementById('tickerForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const ticker = document.getElementById('ticker').value.toUpperCase();
            const btn = document.getElementById('analyzeBtn');
            const msg = document.getElementById('tickerMessage');
            
            btn.disabled = true;
            btn.textContent = 'Analyzing...';
            msg.textContent = '';
            
            try {
                const response = await fetch('https://xfi2u4ajm9.execute-api.us-east-1.amazonaws.com/prod/ticker-analysis', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ ticker })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    // Redirect to analysis page
                    sessionStorage.setItem('tickerAnalysis', JSON.stringify(data));
                    window.location.href = '/ticker-analysis.html';
                } else {
                    throw new Error('Failed to analyze ticker');
                }
            } catch (error) {
                msg.className = 'mt-3 text-sm text-center text-red-400';
                msg.textContent = 'Unable to analyze ticker. Please check the symbol and try again.';
            } finally {
                btn.disabled = false;
                btn.textContent = 'Analyze';
            }
        });

        // State
        let currentDate = null;
        let currentData = null;

        // Date navigation
        document.getElementById('prevDay').addEventListener('click', () => navigateDate(-1));
        document.getElementById('nextDay').addEventListener('click', () => navigateDate(1));

        function navigateDate(days) {
            const date = new Date(currentDate);
            date.setDate(date.getDate() + days);
            loadAnalysis(date.toISOString().split('T')[0]);
        }

        // Load analysis
        async function loadAnalysis(date = null) {
            try {
                const url = date 
                    ? `https://xfi2u4ajm9.execute-api.us-east-1.amazonaws.com/prod/analysis?date=${date}`
                    : 'https://xfi2u4ajm9.execute-api.us-east-1.amazonaws.com/prod/analysis';
                
                const response = await fetch(url);
                if (!response.ok) throw new Error('No data');
                
                const data = await response.json();
                currentDate = data.date;
                currentData = data;
                displayAnalysis(data);
            } catch (error) {
                console.error('Error loading analysis:', error);
                document.getElementById('loading').classList.add('hidden');
                document.getElementById('error').classList.remove('hidden');
            }
        }

        function displayAnalysis(data) {
            const analysis = data.analysis;
            const displayDate = new Date(currentDate + 'T12:00:00');
            
            // Date
            document.getElementById('dateDisplay').textContent = displayDate.toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // Enable/disable next button
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('nextDay').disabled = currentDate >= today;
            
            // Sector Heatmap
            displaySectorHeatmap(data.market_data);

            // Market Breadth
            displayMarketBreadth(data.market_data);

            // Market Overview
            document.getElementById('marketOverview').textContent = analysis.market_overview;

            // Market Insights
            const insightsList = document.getElementById('marketInsights');
            insightsList.innerHTML = '';
            analysis.market_insights.forEach(insight => {
                const li = document.createElement('li');
                li.className = 'flex items-start';
                li.innerHTML = `<span class="text-blue-400 mr-2">‚Ä¢</span><span>${insight}</span>`;
                insightsList.appendChild(li);
            });

            // Levels to Watch
            const levelsDiv = document.getElementById('levelsToWatch');
            levelsDiv.innerHTML = '';
            analysis.levels_to_watch.forEach(level => {
                const div = document.createElement('div');
                div.className = 'bg-[#252a3a] rounded-lg p-4';
                div.innerHTML = `
                    <div class="font-semibold text-blue-400 text-lg mb-2">${level.symbol} - $${level.level}</div>
                    <div class="text-gray-300 text-sm leading-relaxed">${level.note}</div>
                `;
                levelsDiv.appendChild(div);
            });

            // Unusual Activity
            const unusualDiv = document.getElementById('unusualActivity');
            unusualDiv.innerHTML = '';
            if (analysis.unusual_activity && analysis.unusual_activity.length > 0) {
                analysis.unusual_activity.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'bg-[#252a3a] rounded-lg p-4';
                    const moveColor = parseFloat(item.move) >= 0 ? 'text-green-400' : 'text-red-400';
                    div.innerHTML = `
                        <div class="flex items-center gap-2 mb-2">
                            <span class="font-semibold text-orange-400 text-lg">${item.symbol}</span>
                            <span class="${moveColor} font-semibold">${item.move > 0 ? '+' : ''}${item.move}%</span>
                        </div>
                        <div class="text-gray-300 text-sm">${item.note}</div>
                    `;
                    unusualDiv.appendChild(div);
                });
            } else {
                document.getElementById('unusualSection').classList.add('hidden');
            }

            // Show content
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('content').classList.remove('hidden');
        }

        function displaySectorHeatmap(marketData) {
            const sectors = {
                'Tech': ['AAPL', 'MSFT', 'GOOGL', 'META', 'NVDA', 'AMD', 'INTC'],
                'Finance': ['JPM', 'BAC', 'WFC', 'GS', 'MS', 'C'],
                'Healthcare': ['UNH', 'JNJ', 'LLY', 'ABBV', 'MRK', 'PFE'],
                'Energy': ['XOM', 'CVX', 'COP', 'SLB', 'OXY'],
                'Consumer': ['AMZN', 'TSLA', 'HD', 'NKE', 'SBUX', 'MCD'],
                'Industrial': ['BA', 'CAT', 'GE', 'DE', 'UPS'],
                'Crypto': ['BTC-USD', 'ETH-USD', 'COIN', 'MSTR', 'HOOD'],
                'Indices': ['SPY', 'QQQ', 'DIA', 'IWM']
            };

            const heatmapDiv = document.getElementById('sectorHeatmap');
            heatmapDiv.innerHTML = '';

            Object.entries(sectors).forEach(([sector, tickers]) => {
                const changes = tickers
                    .map(t => marketData[t]?.change_percent)
                    .filter(c => c != null)
                    .map(c => parseFloat(c));
                
                if (changes.length === 0) return;
                
                const avgChange = changes.reduce((a, b) => a + b, 0) / changes.length;
                const color = avgChange > 1 ? 'bg-green-600' : 
                             avgChange > 0 ? 'bg-green-700' : 
                             avgChange > -1 ? 'bg-red-700' : 'bg-red-600';
                
                const div = document.createElement('div');
                div.className = `${color} rounded-lg p-4 text-center transition hover:scale-105`;
                div.innerHTML = `
                    <div class="font-semibold text-sm mb-1">${sector}</div>
                    <div class="text-2xl font-bold">${avgChange > 0 ? '+' : ''}${avgChange.toFixed(2)}%</div>
                `;
                heatmapDiv.appendChild(div);
            });
        }

        function displayMarketBreadth(marketData) {
            // Filter out futures and crypto for cleaner breadth metrics
            const stocks = Object.entries(marketData).filter(([symbol]) => 
                !symbol.includes('=F') && !symbol.includes('-USD')
            );

            // Advance/Decline
            const advancing = stocks.filter(([_, data]) => parseFloat(data.change_percent || 0) > 0).length;
            const declining = stocks.filter(([_, data]) => parseFloat(data.change_percent || 0) < 0).length;
            const unchanged = stocks.length - advancing - declining;
            const adRatio = declining > 0 ? (advancing / declining).toFixed(2) : advancing;

            // New Highs/Lows (at 5-day high/low)
            const newHighs = stocks.filter(([_, data]) => {
                const price = parseFloat(data.price || 0);
                const high5d = parseFloat(data.high_5d || 0);
                return price > 0 && Math.abs(price - high5d) < 0.01;
            }).length;

            const newLows = stocks.filter(([_, data]) => {
                const price = parseFloat(data.price || 0);
                const low5d = parseFloat(data.low_5d || 0);
                return price > 0 && Math.abs(price - low5d) < 0.01;
            }).length;

            // Strong movers
            const strongUp = stocks.filter(([_, data]) => parseFloat(data.change_percent || 0) > 3).length;
            const strongDown = stocks.filter(([_, data]) => parseFloat(data.change_percent || 0) < -3).length;

            const breadthDiv = document.getElementById('marketBreadth');
            breadthDiv.innerHTML = '';

            const metrics = [
                { label: 'Adv/Dec Ratio', value: adRatio, subtext: `${advancing}‚Üë ${declining}‚Üì`, color: adRatio > 1 ? 'text-green-400' : 'text-red-400' },
                { label: '5D Highs/Lows', value: `${newHighs}/${newLows}`, subtext: 'New extremes', color: newHighs > newLows ? 'text-green-400' : 'text-red-400' },
                { label: 'Strong Moves', value: `${strongUp}‚Üë ${strongDown}‚Üì`, subtext: '>3% change', color: strongUp > strongDown ? 'text-green-400' : 'text-red-400' },
                { label: 'Total Stocks', value: stocks.length, subtext: 'Tracked', color: 'text-blue-400' }
            ];

            metrics.forEach(metric => {
                const div = document.createElement('div');
                div.className = 'bg-[#252a3a] rounded-lg p-4 text-center';
                div.innerHTML = `
                    <div class="text-gray-400 text-xs mb-1">${metric.label}</div>
                    <div class="${metric.color} text-2xl font-bold mb-1">${metric.value}</div>
                    <div class="text-gray-500 text-xs">${metric.subtext}</div>
                `;
                breadthDiv.appendChild(div);
            });
        }

        // Load on page load
        loadAnalysis();
    </script>
</body>
</html>
